{% extends "coltrane/base_entries.html" %}

{% block extra-js %}{{ block.super }}
    <script type="text/javascript">
        var items_per_page = 7;
        function pageselectCallback(page_index, jq){
            var start_index = page_index*items_per_page;
            var end_index = start_index + items_per_page;
            var new_content = jQuery('#entries div.entry').slice(start_index,end_index).clone(); 
            $('#Searchresult').empty();
            for(var i=0;i<new_content.length;i++) {
                $('#Searchresult').append(new_content[i]);
            }
            return false;
        }
        /** 
         * Initialisation function for pagination
         */
        function initPagination() {
            // count entries inside the hidden content
            var num_entries = jQuery('#entries div.entry').length;
            // Create content inside pagination element
            $("#Pagination").pagination(num_entries, {
                items_per_page: items_per_page, // Show only one item per page
                callback: pageselectCallback
            });
         }
        // When document is ready, initialize pagination
        $(document).ready(function(){      
            initPagination();
            $("#Pagination").trigger('setPage', [0]);
        });
    </script>
{% endblock %}

{% block content %}
    <div id="Searchresult">
    </div>
    <div id="entries" style="display:none;">
        {% for entry in object_list %}
        <div class="entry">
            <h1><a href="{{ entry.get_absolute_url }}">{{ entry.title }}</a></h1>
            <div class="date-published">{{ entry.pub_date|date:"F j, Y" }}</div>
            {{ entry.body_html|safe }}
            <h4><a href="{{ entry.get_absolute_url }}"  class="grey-text">View Comments</a></h4>
        </div>
        {% endfor %}
    </div>
    <div id="Pagination"></div>
{% endblock %}
